{% extends 'base.html.j2' %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/arrange.css') }}">
{% endblock styles %}

{% block title %}
    {{ super() }}
     | Arrange files
{% endblock title %}

{% block body %}
<div class="main-content">
  <div class="heading">
    <h1>Arrange files</h1>
  </div>
  <form action="/merger/{{ id }}/complete/" method="POST">
    <div id="arrange-container">
      {% for file in file_list %}
        <div class="file spectrum-AssetList-item is-branch is-selectable is-selected">
          <div class="left">
            <div class="spectrum-Checkbox">
              <input type="checkbox" class="spectrum-Checkbox-input" 
              name="file_{{ loop.index }}['check']" checked onclick="checkbox(this);">
              <span class="spectrum-Checkbox-box"></span>
            </div>
            
            <input type="text" name="file_{{ loop.index }}['name']" id="" value="{{ file['filename'] }}" class="file-input">
            <div>
              <i class="fas fa-file-pdf" style="color:#F40F02"></i>&nbsp;&nbsp;&nbsp;{{ file['filename'] }}
            </div>
          </div>

          <div class="right">
            <div class="spectrum-Stepper">
              {# <div class="spectrum-Textfield spectrum-Stepper-textfield"> #}
                <label for="p_start">Start Page</label>
                <input type="number" class="spectrum-Textfield-input spectrum-Stepper-input" 
                  min="1" max="{{ file["pages"] }}" step="1" value="1" 
                  name="file_{{ loop.index }}['start']" id="p_start">
              {# </div> #}
              <span class="spectrum-Stepper-buttons">
                <button type="button" class="spectrum-FieldButton spectrum-Stepper-stepUp" tabindex="2" id="stepUp">
                  {# <i class="fas fa-chevron-up"></i> #}
                  <svg xmlns="http://www.w3.org/2000/svg" width="8" height="6"><path d="M4 .5a.747.747 0 00-.53.22C2.862 1.297 1.5 2.758.23 3.96a.75.75 0 101.06 1.06L4 2.31l2.71 2.71a.75.75 0 101.06-1.06L4.53.72A.747.747 0 004 .5z"/></svg>
                </button>
                <button type="button" class="spectrum-FieldButton spectrum-Stepper-stepDown" tabindex="2" id="stepDown">
                  {# <i class="fas fa-chevron-down"></i> #}
                  <svg xmlns="http://www.w3.org/2000/svg" width="8" height="6"><path d="M4 5.5a.747.747 0 00.53-.22c.607-.577 1.97-2.038 3.24-3.24A.75.75 0 106.71.98L4 3.69 1.29.98A.75.75 0 10.23 2.04l3.24 3.24A.747.747 0 004 5.5z"/></svg>
                </button>
              </span>
            </div>
  
            <div class="spectrum-Stepper">
              {# <div class="spectrum-Textfield spectrum-Stepper-textfield"> #}
                <label for="p_end">End Page</label>
                <input type="number" class="spectrum-Textfield-input spectrum-Stepper-input" 
                  min="1" max="{{ file["pages"] }}" step="1" value="{{ file["pages"] }}" 
                  name="file_{{ loop.index }}['end']" id="p_end">
              {# </div> #}
              <span class="spectrum-Stepper-buttons">
                <button type="button" class="spectrum-FieldButton spectrum-Stepper-stepUp" tabindex="2" id="stepUp">
                  {# <i class="fas fa-chevron-up"></i> #}
                  <svg xmlns="http://www.w3.org/2000/svg" width="8" height="6"><path d="M4 .5a.747.747 0 00-.53.22C2.862 1.297 1.5 2.758.23 3.96a.75.75 0 101.06 1.06L4 2.31l2.71 2.71a.75.75 0 101.06-1.06L4.53.72A.747.747 0 004 .5z"/></svg>
                </button>
                <button type="button" class="spectrum-FieldButton spectrum-Stepper-stepDown" tabindex="2" id="stepDown">
                  {# <i class="fas fa-chevron-down"></i> #}
                  <svg xmlns="http://www.w3.org/2000/svg" width="8" height="6"><path d="M4 5.5a.747.747 0 00.53-.22c.607-.577 1.97-2.038 3.24-3.24A.75.75 0 106.71.98L4 3.69 1.29.98A.75.75 0 10.23 2.04l3.24 3.24A.747.747 0 004 5.5z"/></svg>
                </button>
              </span>
            </div>
          </div>

          {# <input type="number" name="file_{{ loop.index }}['start']" id="" value=1> #}
          {# <input type="number" name="file_{{ loop.index }}['end']" id="" value={{ file["pages"] }}> #}
        </div>
      {% endfor %}
    </div>

    <div class="row">
      <button type="submit" class="spectrum-Button spectrum-Button--cta" id="submit-btn">
        <span class="spectrum-Button-label">Merge!</span>
      </button>
    </div>
  </form>


</div>
{% endblock body %}

{% block scripts %}
  {{ super() }}
  <script 
    src="https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.3/dragula.min.js" 
    integrity="sha512-NgXVRE+Mxxf647SqmbB9wPS5SEpWiLFp5G7ItUNFi+GVUyQeP+7w4vnKtc2O/Dm74TpTFKXNjakd40pfSKNulg==" 
    crossorigin="anonymous">
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" 
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" 
    crossorigin="anonymous">
  </script>
  <script src="{{ url_for('static', filename='js/arrange.js') }}"></script>
{% endblock scripts %}