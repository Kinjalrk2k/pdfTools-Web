{% extends 'base.html.j2' %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/complete.css') }}">
{% endblock styles %}

{% block title %}
    {{ super() }}
     | Complete
{% endblock title %}

{% block body %}
<div class="spectrum-Toast spectrum-Toast--positive">
  <div class="toast-message">
    <svg class="spectrum-Icon spectrum-UIIcon-SuccessMedium spectrum-Toast-typeIcon" focusable="false" aria-hidden="true">
      <path d="M9 1a8 8 0 108 8 8 8 0 00-8-8zm-.15 2.15a1.359 1.359 0 011.431 1.283q.004.064.001.129A1.332 1.332 0 018.85 5.994a1.353 1.353 0 01-1.432-1.433 1.359 1.359 0 011.304-1.412q.064-.002.128.001zM11 13.5a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5H8V9h-.5a.5.5 0 01-.5-.5v-1a.5.5 0 01.5-.5h2a.5.5 0 01.5.5V12h.5a.5.5 0 01.5.5z"/>
    </svg>
    <div class="spectrum-Toast-body">
      <div class="spectrum-Toast-content">
        This session expires in: <strong><span id="countdown">10:00</span></strong>
      </div>
    </div>
  </div>
  <div class="progress-bar">
    <div id="progress">
      <div id="bar"></div>
    </div>
  </div>
</div>

<div class="main-content">
  <div class="heading">
    <h1>Download</h1>
  </div>

  <div class="spectrum-Steplist" role="list">
    <div class="spectrum-Steplist-item is-complete" role="listitem" aria-posinset="1" aria-setsize="4">
      <span class="spectrum-Steplist-label">Start Merger</span>
      <span class="spectrum-Steplist-markerContainer">
        <span class="spectrum-Steplist-marker"></span>
      </span>
      <span class="spectrum-Steplist-segment"></span>
    </div>
    <div class="spectrum-Steplist-item is-complete" role="listitem" aria-posinset="2" aria-setsize="4">
      <span class="spectrum-Steplist-label">Upload Files</span>
      <span class="spectrum-Steplist-markerContainer">
        <span class="spectrum-Steplist-marker"></span>
      </span>
      <span class="spectrum-Steplist-segment"></span>
    </div>
    <div class="spectrum-Steplist-item is-complete" role="listitem" aria-posinset="3" aria-setsize="4" aria-current="step">
      <span class="spectrum-Steplist-label">Arrange Files</span>
      <span class="spectrum-Steplist-markerContainer">
        <span class="spectrum-Steplist-marker"></span>
      </span>
      <span class="spectrum-Steplist-segment"></span>
    </div>
    <div class="spectrum-Steplist-item is-selected" role="listitem" aria-posinset="4" aria-setsize="4">
      <span class="spectrum-Steplist-label">Complete</span>
      <span class="spectrum-Steplist-markerContainer">
        <span class="spectrum-Steplist-marker"></span>
      </span>
      <span class="spectrum-Steplist-segment"></span>
    </div>
  </div>

  <a href="/merger/{{ id }}/download/">
    <div class="spectrum-Asset spectrum-Dropzone is-dragged">
      <div>
        <img width="100" alt="PDF file icon" 
          src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/256px-PDF_file_icon.svg.png">
      </div>

      <div class="spectrum-StatusLight spectrum-StatusLight--positive spectrum-Heading spectrum-Heading--sizeXL">
        Download {{ id }}.pdf
      </div>

    </div>
  </a>

  
  <div class="row">
    <a href="/merger">
      <button class="spectrum-Button spectrum-Button--cta" id="restart-btn">
        <span class="spectrum-Button-label">Merge another set&nbsp;<i class="fas fa-redo"></i></span>
      </button>
    </a>
  </div>
    
</div>
{% endblock body %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/countdown.js') }}"></script>
  <script>
    countdown_wrapper({{ id }}, {{ expires | tojson}})
  </script>
{% endblock scripts %}
